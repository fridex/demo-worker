---
  flow-definitions:
    - name: travis_org_logs
      queue: travis_org_logs
      nowait: travis_repo_logs
      sampling:
        name: constant
        args:
          retry: 2
      edges:
        - from:
          to: travis_active_repos_task
        - from: travis_active_repos_task
          to: travis_repo_logs
          foreach:
            function: iter_travis_repos
            import: demo_worker.foreach
            propagate_result: true

    - name: travis_repo_logs
      queue: travis_repo_logs
      nowait: travis_build_logs
      sampling:
        name: constant
        args:
          retry: 2
      edges:
        - from:
          to: travis_repo_builds_task
        - from: travis_repo_builds_task
          to: travis_build_logs
          foreach:
            function: iter_travis_builds
            import: demo_worker.foreach
            propagate_result: true

    - name: travis_build_logs
      queue: travis_build_logs
      sampling:
        name: constant
        args:
          retry: 2
      edges:
        - from:
          to: travis_log_txt_task
